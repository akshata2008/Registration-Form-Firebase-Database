<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" charset="utf-8">
    <title>Registration</title>
    <link rel="stylesheet" href="style.css">
    <style>
      #span_reg{
        /*border:1px solid black;*/
        width:20px;
        height:10px;
      }
    </style>
  </head>
  <body>
    <div class="header"></div>

      <form class="main_form" autocomplete="off">
        <h2>Registration Form</h2><br>
        <label>Registration No.</label><span id="span_reg"></span><br>
        <input class = "box" id="reg_num" type="text" placeholder="110115001" required><br>

        <label>First Name</label><br>
        <input name="fname" class = "box" id="fname" type="text" placeholder="Anuj"><br>

        <label>Last Name</label><br>
        <input  class = "box" id="lname" type="text" placeholder="Soorya"><br>

        <label>Gender</label><br>
        <table class="radio_class" id="gender" required>
          <tr>
              <td class="table_data" width="9%">
                <label class="radio_container">
                <input value="Male" type="radio" id="male">
                <span class="radiomark"></span>
              </label>
              </td>
              <td class="table_text" width="43%">
                <label class="radio_container">
                Male
              </label>
              </td>
              <td class="table_data" width="9%">
                <label class="radio_container">
                <input value="Female" type="radio" id="female">
                <span class="radiomark"></span>
              </label>
              </td>
              <td class="table_text" width="43%">
                <label class="radio_container">
                Female
              </label>
              </td>
          </tr>
        </table>
        <br>
        <label>Phone No.</label><br>
        <input class = "box" id="phone_num" type="text" placeholder="918933367" ><br>

        <label>Email</label><br>
        <input class = "box" id="email" type="text" placeholder="anuj.soorya@gmail.com" ><br>

        <label>Branch</label><br>
        <input class = "box" id="branch" type="text" placeholder="Instrumentation and Control Engineering"><br>

        <label>College Name</label><br>
        <input class = "box" id="cname" type="text" placeholder="National Institute of Technology, Tiruchirapalli"><br>

        <label>City</label><br>
        <input class = "box" id="city" type="text" placeholder="Trichy"><br>

        <label>Accomodation (if needed)</label><br>
        <table class="radio_class2" id="acc">
          <tr>
              <td class="table_data2" width="9%">
                <label class="radio_container2">
                <input value="Yes" name="radio2" type="radio" id="acc_y">
                <span class="radiomark2"></span>
              </label>
              </td>
              <td class="table_text2" width="43%">
                <label class="radio_container2">
                Yes
              </label>
              </td>
              <td class="table_data2" width="9%">
                <label class="radio_container2">
                <input value="No" name="radio2" type="radio" id="acc_n">
                <span class="radiomark2"></span>
              </label>
              </td>
              <td class="table_text2" width="43%">
                <label class="radio_container2">
                No
              </label>
              </td>
          </tr>
        </table>

        <label>If yes, select the accomodation</label><br>
        <div class="dropdown">
          <select id="accomodation_info">
            <option value="0">Select Accomodation</option>
            <option value="opal">Opal-Building 1</option>
            <option value="2"></option>
            <option value="3"></option>
          </select><br>
        </div>
        <br>
        <label>Workshops</label><br>
                <table id="checkbox_table">
                  <tr>
                      <td>
                        <label class="checkbox_container">
                        <input type="checkbox" class="checkbox" value="yes" id="segway">
                        <span class="checkmark"></span>
                        </label>
                      </td>
                      <td>
                        <label class="checkbox_container">
                        <span class="cc_text">Segway:General Robotics</span>
                        </label>
                      </td>
                  </tr>
                  <tr>
                    <td></td>
                    <td>
                      <div class="dropdown">
                        <select id="segway_slot_info">
                          <option value="0">Select Slot</option>
                          <option value="1">Slot 1</option>
                          <option value="2">Slot 2</option>
                          <option value="3">Slot 3</option>
                          <option value="4">Slot 4</option>
                        </select><br>
                      </div>
                    </td>
                  </tr>
                  <tr>
                      <td>
                        <label class="checkbox_container">
                        <input type="checkbox" class="checkbox" value="yes" id="flappy_bird">
                        <span class="checkmark"></span>
                        </label>
                      </td>
                      <td>
                        <label class="checkbox_container">
                        <span class="cc_text">Flappy Bird:Android App Development</span>
                        </label>
                      </td>
                  </tr>
                  <tr>
                    <td></td>
                    <td>
                      <div class="dropdown">
                        <select id="flappy_bird_slot_info">
                          <option value="0">Select Slot</option>
                          <option value="1">Slot 1</option>
                          <option value="2">Slot 2</option>
                          <option value="3">Slot 3</option>
                          <option value="4">Slot 4</option>
                        </select><br>
                      </div>
                    </td>
                  </tr>
                  <tr>
                      <td>
                        <label class="checkbox_container">
                        <input type="checkbox" class="checkbox" value="yes" id="r2d2">
                        <span class="checkmark"></span>
                        </label>
                      </td>
                      <td>
                        <label class="checkbox_container">
                        <span class="cc_text">R2D2:Voice Controlled Robotics</span>
                      </label>
                      </td>
                  </tr>
                  <tr>
                    <td></td>
                    <td>
                      <div class="dropdown">
                        <select id="r2d2_slot_info">
                          <option value="0">Select Slot</option>
                          <option value="1">Slot 1</option>
                          <option value="2">Slot 2</option>
                          <option value="3">Slot 3</option>
                          <option value="4">Slot 4</option>
                        </select><br>
                      </div>
                    </td>
                  </tr>
                  <tr>
                      <td>
                        <label class="checkbox_container">
                        <input type="checkbox" class="checkbox" value="yes" id="chrome_dino">
                        <span class="checkmark"></span>
                        </label>
                      </td>
                      <td>
                        <label class="checkbox_container">
                        <span class="cc_text">Chrome Dino:Computer Vision Based Control</span>
                        </label>
                      </td>
                  </tr>
                  <tr>
                    <td></td>
                    <td>
                      <div class="dropdown">
                        <select id="chrome_dino_slot_info">
                          <option value="0">Select Slot</option>
                          <option value="1">Slot 1</option>
                          <option value="2">Slot 2</option>
                          <option value="3">Slot 3</option>
                          <option value="4">Slot 4</option>
                        </select><br>
                      </div>
                    </td>
                  </tr>
                  <tr>
                      <td>
                        <label class="checkbox_container">
                        <input type="checkbox" class="checkbox" value="yes" id="stock_market">
                        <span class="checkmark"></span>
                        </label>
                      </td>
                      <td>
                        <label class="checkbox_container">
                        <span class="cc_text">Stock Market Prediction using Machine Learning</span>
                        </label>
                      </td>
                  </tr>
                  <tr>
                    <td></td>
                    <td>
                      <div class="dropdown">
                        <select id="stock_market_slot_info">
                          <option value="0">Select Slot</option>
                          <option value="1">Slot 1</option>
                          <option value="2">Slot 2</option>
                          <option value="3">Slot 3</option>
                          <option value="4">Slot 4</option>
                        </select><br>
                      </div>
                    </td>
                  </tr>
                  <tr>
                      <td>
                        <label class="checkbox_container">
                        <input type="checkbox" class="checkbox" value="yes" id="workshop1">
                        <span class="checkmark"></span>
                        </label>
                      </td>
                      <td>
                        <label class="checkbox_container">
                        <span class="cc_text">Workshop 1</span>
                        </label>
                      </td>
                  </tr>
                  <tr>
                    <td></td>
                    <td>
                      <div class="dropdown">
                        <select id="workshop1_slot_info">
                          <option value="0">Select Slot</option>
                          <option value="1">Slot 1</option>
                          <option value="2">Slot 2</option>
                          <option value="3">Slot 3</option>
                          <option value="4">Slot 4</option>
                        </select><br>
                      </div>
                    </td>
                  </tr>
                  <tr>
                      <td>
                        <label class="checkbox_container">
                        <input type="checkbox" class="checkbox" value="yes" id="workshop2">
                        <span class="checkmark"></span>
                        </label>
                      </td>
                      <td>
                        <label class="checkbox_container">
                        <span class="cc_text">Workshop 2</span>
                        </label>
                      </td>
                    </tr>
                     <tr>
                    <td></td>
                    <td>
                      <div class="dropdown">
                        <select id="workshop2_slot_info">
                          <option value="0">Select Slot</option>
                          <option value="1">Slot 1</option>
                          <option value="2">Slot 2</option>
                          <option value="3">Slot 3</option>
                          <option value="4">Slot 4</option>
                        </select><br>
                      </div>
                    </td>
                  </tr>
                </table>
        <br>
        <label>Events</label><br>
        <table>
          <tr>
              <td>
                <label class="checkbox_container">
                <input type="checkbox" class="checkbox" value="yes" id="lt_doesnt_exist">
                <span class="checkmark"></span>
                </label>
              </td>
              <td>
                <label class="checkbox_container">
                <span class="cc_text">Lt Doesn't Exist</span>
              </label>
              </td>
              <td>
                <label class="checkbox_container">
                <input type="checkbox" class="checkbox" value="yes" id="robo_race">
                <span class="checkmark"></span>
                </label>
              </td>
              <td>
                <label class="checkbox_container">
                <span class="cc_text">Robo Race</span>
                </label>
              </td>
          </tr>
          <tr>
              <td>
                <label class="checkbox_container">
                <input type="checkbox" class="checkbox" value="yes" id="trail_by_tronix">
                <span class="checkmark"></span>
                </label>
              </td>
              <td>
                <label class="checkbox_container">
                <span class="cc_text">Trail By Tronix</span>
                </label>
              </td>
              <td>
                <label class="checkbox_container">
                <input type="checkbox" class="checkbox" value="yes" id="code_quest">
                <span class="checkmark"></span>
                </label>
              </td>
              <td>
                <label class="checkbox_container">
                <span class="cc_text">Code Quest</span>
                </label>
              </td>
          </tr>
          <tr>
              <td>
                <label class="checkbox_container">
                <input type="checkbox" class="checkbox" value="yes" id="algo_warriors">
                <span class="checkmark"></span>
                </label>
              </td>
              <td>
                <label class="checkbox_container">
                <span class="cc_text">Algo Warriors</span>
              </label>
              </td>
              <td>
                <label class="checkbox_container">
                <input type="checkbox" class="checkbox" value="yes" id="ideat_build">
                <span class="checkmark"></span>
                </label>
              </td>
              <td>
                <label class="checkbox_container">
                <span class="cc_text">Ideate & Build</span>
                </label>
              </td>
          </tr>
        </table>

        <br>
        <button id="btn" type="submit">SUBMIT</button>
      </form>
    <div class="footer"></div>
  </body>
  <script type="text/javascript" src="https://www.gstatic.com/firebasejs/5.3.0/firebase.js"></script>
  <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyCVBkjljkPepo6br1wS7_DKDx0llm_7Rqc",
      authDomain: "fir-1-a96e9.firebaseapp.com",
      databaseURL: "https://fir-1-a96e9.firebaseio.com",
      projectId: "fir-1-a96e9",
      storageBucket: "fir-1-a96e9.appspot.com",
      messagingSenderId: "877166335783"
    };
    firebase.initializeApp(config);
    //firebase.database().ref().push ({"k": "v"})
  </script>
  <script>
  /**********************************************************************/
  //  FORM VALIDATION
  // function myFunction(){
  //   var reg, reg_num_err;
  //
  //   reg = document.getElementById("reg_num").value;
  //   window.alert(reg_num);
  //   if(reg > 110115999 || reg < 110115001)
  //     reg_num_err = "Invalid registration number";
  //   document.getElementById("span_reg").innerHTML=reg_num_err;
  // }
  //FOR DROPDOWN
    var x, i, j, selElmnt, a, b, c;
    /*look for any elements with the class "custom-select":*/
    x = document.getElementsByClassName("dropdown");
    for (i = 0; i < x.length; i++) {
    selElmnt = x[i].getElementsByTagName("select")[0];
    /*for each element, create a new DIV that will act as the selected item:*/
    a = document.createElement("DIV");
    a.setAttribute("class", "new-select");
    a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
    x[i].appendChild(a);
    /*for each element, create a new DIV that will contain the option list:*/
    b = document.createElement("DIV");
    b.setAttribute("class", "select-items select-hide");
    for (j = 0; j < selElmnt.length; j++) {
    /*for each option in the original select element,
    create a new DIV that will act as an option item:*/
    c = document.createElement("DIV");
    c.innerHTML = selElmnt.options[j].innerHTML;
    c.addEventListener("click", function(e) {
      /*when an item is clicked, update the original select box,
      and the selected item:*/
      var y, i, k, s, h;
      s = this.parentNode.parentNode.getElementsByTagName("select")[0];
      h = this.parentNode.previousSibling;
      for (i = 0; i < s.length; i++) {
        if (s.options[i].innerHTML == this.innerHTML) {
          s.selectedIndex = i;
          h.innerHTML = this.innerHTML;
          y = this.parentNode.getElementsByClassName("same-as-selected");
          for (k = 0; k < y.length; k++) {
            y[k].removeAttribute("class");
          }
          this.setAttribute("class", "same-as-selected");
          break;
        }
      }
      h.click();
    });
    b.appendChild(c);
    }
    x[i].appendChild(b);
    a.addEventListener("click", function(e) {
    /*when the select box is clicked, close any other select boxes,and
     open/close the current select box:*/
            e.stopPropagation();
            closeAllSelect(this);
            this.nextSibling.classList.toggle("select-hide");
            this.classList.toggle("select-arrow-active");
          });
    }
          function closeAllSelect(elmnt) {
          /*a function that will close all select boxes in the document,
          except the current select box:*/
          var x, y, i, arrNo = [];
          x = document.getElementsByClassName("select-items");
          y = document.getElementsByClassName("new-select");
          for (i = 0; i < y.length; i++) {
            if (elmnt == y[i]) {
              arrNo.push(i)
            } else {
              y[i].classList.remove("select-arrow-active");
            }
          }
          for (i = 0; i < x.length; i++) {
            if (arrNo.indexOf(i)) {
              x[i].classList.add("select-hide");
            }
          }
      }
          /*if the user clicks anywhere outside the select box,
          then close all select boxes:*/
          document.addEventListener("click", closeAllSelect);
  </script>
  <script>
    //$("#dropdown").insertAfter("label.checkbox_container");
    //firebase
    var database = firebase.database();
    var r = database.ref('registrations');// create or refer

    var onComplete = function(error) {
    if (error)
        console.log('Operation failed');
    else 
        console.log(' Operation completed');
    };
    
    var btn = document.getElementById('btn');
    btn.addEventListener('click', function(){
      var reg_num = document.getElementById('reg_num').value;
      var fname = document.getElementById('fname').value;
      var lname = document.getElementById('lname').value;
      var phone_num = document.getElementById('phone_num').value;
      var email = document.getElementById('email').value;
      var branch = document.getElementById('branch').value;
      var cname = document.getElementById('cname').value;
      var city = document.getElementById('city').value;

      // var gender = document.getElementById('gender').value;
      if(document.getElementById('male').checked){
        var gender_value = document.getElementById('male').value;
      }
      else if(document.getElementById('female').checked){
        gender_value = document.getElementById('female').value;
      }

      //Accomodation
      if(document.getElementById('acc_y').checked){
        var acc_value = document.getElementById('acc_y').value;
      }
      else if(document.getElementById('acc_n').checked){
        acc_value = document.getElementById('acc_n').value;
      }
      //Accomodation info from dropdown menu
      var info = document.getElementById("accomodation_info").value;

      //WORKSHOPS
      if(document.getElementById("segway").checked){
        var a = document.getElementById("segway").value;
        var segway_slot_info = document.getElementById("segway_slot_info").value; 
      }
      else 
        a = "no";
      if(document.getElementById("flappy_bird").checked){
        var b = document.getElementById("flappy_bird").value;
        var flappy_bird_slot_info = document.getElementById("flappy_bird_slot_info").value;
      }
      else
        b = "no"; 
      if(document.getElementById("r2d2").checked){
        var c = document.getElementById("r2d2").value;
        var r2d2_slot_info = document.getElementById("r2d2_slot_info").value;
      }
      else 
        c = "no";
      if(document.getElementById("chrome_dino").checked){
        var d = document.getElementById("chrome_dino").value;
        var chrome_dino_slot_info = document.getElementById("chrome_dino_slot_info").value;
      }
      else 
        d = "no";
      if(document.getElementById("stock_market").checked){
        var e = document.getElementById("stock_market").value;
        var stock_market_slot_info = document.getElementById("stock_market_slot_info").value;
      }
      else
        e = "no";
      if(document.getElementById("workshop1").checked){
        var f = document.getElementById("workshop1").value;
        var workshop1_slot_info = document.getElementById("workshop1_slot_info").value;
      }
      else
        f = "no";
      if(document.getElementById("workshop2").checked){
        var g = document.getElementById("workshop2").value;
        var workshop2_slot_info = document.getElementById("workshop2_slot_info").value;
      }
      else 
        g = "no";

      //EVENTS
      if(document.getElementById("lt_doesnt_exist").checked)
        var ea = document.getElementById("lt_doesnt_exist").value;
      else 
        ea = "no";
      if(document.getElementById("robo_race").checked)
        var eb = document.getElementById("robo_race").value;
      else
        eb = "no"; 
      if(document.getElementById("trail_by_tronix").checked)
        var ec = document.getElementById("trail_by_tronix").value;
      else 
        ec = "no";
      if(document.getElementById("code_quest").checked)
        var ed = document.getElementById("code_quest").value;
      else 
        ed = "no";
      if(document.getElementById("algo_warriors").checked)
        var ee = document.getElementById("algo_warriors").value;
      else
        ee = "no";
      if(document.getElementById("ideat_build").checked)
        var ef = document.getElementById("ideat_build").value;
      else
        ef = "no";

      var obj = {
          reg_num: reg_num,
          first_name: fname,
          last_name: lname,
          gender: (gender_value) ? gender_value : 0,
          phone_num: phone_num,
          email: email,
          branch: branch,
          college: cname,
          city: city,
          accomodation: (acc_value) ? acc_value : 0,
          accomodation_info: info,

          workshop_segway: a,
          workshop_segway_slot: (segway_slot_info) ? segway_slot_info : 0,
          workshop_flappy_bird: b,
          workshop_flappy_bird_slot: (flappy_bird_slot_info) ? flappy_bird_slot_info : 0,
          workshop_r2d2: c,
          workshop_r2d2_slot: (r2d2_slot_info) ? r2d2_slot_info : 0,
          workshop_chrome_dino: d,
          workshop_chrome_dino_slot: (chrome_dino_slot_info) ? chrome_dino_slot_info : 0,
          workshop_stock_market: e,
          workshop_stock_market_slot: (stock_market_slot_info) ? stock_market_slot_info : 0,
          workshop_workshop1: f,
          workshop_workshop1_slot: (workshop1_slot_info) ? workshop1_slot_info : 0,
          workshop_workshop2: g,
          workshop_workshop2_slot: (workshop2_slot_info) ? workshop2_slot_info : 0,

          z_lt_doesnt_exist: ea,
          z_robo_race: eb,
          z_trail_y_tronix: ec,
          z_code_quest: ed,
          z_algo_warriors: ee,
          z_ideat_build: ef
      };


     r.child(obj.reg_num).set(obj, onComplete);
      
      //root.push(obj); 
    });
  </script>
</html>
